@using Snailbird.Client.Services
@inherits LayoutComponentBase

@* Required *@
<MudThemeProvider Theme="@_theme" IsDarkMode="_isDarkMode" />
<MudPopoverProvider />

@* Needed for dialogs *@
<MudDialogProvider />

@* Needed for snackbars *@
<MudSnackbarProvider />

<MudLayout Style="display: flex; flex-direction: column; min-height: 100vh">
    <MudAppBar Elevation="1">
        <NavBar @bind-IsDarkMode="_isDarkMode"/>
    </MudAppBar>
    <MudMainContent Class="flex-grow-1">
        @Body
    </MudMainContent>
    <FooterBar />
</MudLayout>

@code {

    private bool _isDarkMode = true;
    private MudTheme? _theme = null;

    [Inject] public required SnailbirdThemeFactory ThemeFactory { get; set; }
    
    protected override void OnInitialized()
    {
        base.OnInitialized();

        _theme = ThemeFactory.MakeTheme();
    }
}